(function(){var a=this,b=a._,c={},d=Array.prototype,e=Object.prototype,f=Function.prototype,g=d.push,h=d.slice,i=d.concat,j=e.toString,k=e.hasOwnProperty,l=d.forEach,m=d.map,n=d.reduce,o=d.reduceRight,p=d.filter,q=d.every,r=d.some,s=d.indexOf,t=d.lastIndexOf,u=Array.isArray,v=Object.keys,w=f.bind,x=function(a){return a instanceof x?a:this instanceof x?void(this._wrapped=a):new x(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=x),exports._=x):a._=x,x.VERSION="1.5.1";var y=x.each=x.forEach=function(a,b,d){if(null!=a)if(l&&a.forEach===l)a.forEach(b,d);else if(a.length===+a.length){for(var e=0,f=a.length;f>e;e++)if(b.call(d,a[e],e,a)===c)return}else for(var g in a)if(x.has(a,g)&&b.call(d,a[g],g,a)===c)return};x.map=x.collect=function(a,b,c){var d=[];return null==a?d:m&&a.map===m?a.map(b,c):(y(a,function(a,e,f){d.push(b.call(c,a,e,f))}),d)};var z="Reduce of empty array with no initial value";x.reduce=x.foldl=x.inject=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),n&&a.reduce===n)return d&&(b=x.bind(b,d)),e?a.reduce(b,c):a.reduce(b);if(y(a,function(a,f,g){e?c=b.call(d,c,a,f,g):(c=a,e=!0)}),!e)throw new TypeError(z);return c},x.reduceRight=x.foldr=function(a,b,c,d){var e=arguments.length>2;if(null==a&&(a=[]),o&&a.reduceRight===o)return d&&(b=x.bind(b,d)),e?a.reduceRight(b,c):a.reduceRight(b);var f=a.length;if(f!==+f){var g=x.keys(a);f=g.length}if(y(a,function(h,i,j){i=g?g[--f]:--f,e?c=b.call(d,c,a[i],i,j):(c=a[i],e=!0)}),!e)throw new TypeError(z);return c},x.find=x.detect=function(a,b,c){var d;return A(a,function(a,e,f){return b.call(c,a,e,f)?(d=a,!0):void 0}),d},x.filter=x.select=function(a,b,c){var d=[];return null==a?d:p&&a.filter===p?a.filter(b,c):(y(a,function(a,e,f){b.call(c,a,e,f)&&d.push(a)}),d)},x.reject=function(a,b,c){return x.filter(a,function(a,d,e){return!b.call(c,a,d,e)},c)},x.every=x.all=function(a,b,d){b||(b=x.identity);var e=!0;return null==a?e:q&&a.every===q?a.every(b,d):(y(a,function(a,f,g){return(e=e&&b.call(d,a,f,g))?void 0:c}),!!e)};var A=x.some=x.any=function(a,b,d){b||(b=x.identity);var e=!1;return null==a?e:r&&a.some===r?a.some(b,d):(y(a,function(a,f,g){return e||(e=b.call(d,a,f,g))?c:void 0}),!!e)};x.contains=x.include=function(a,b){return null==a?!1:s&&a.indexOf===s?-1!=a.indexOf(b):A(a,function(a){return a===b})},x.invoke=function(a,b){var c=h.call(arguments,2),d=x.isFunction(b);return x.map(a,function(a){return(d?b:a[b]).apply(a,c)})},x.pluck=function(a,b){return x.map(a,function(a){return a[b]})},x.where=function(a,b,c){return x.isEmpty(b)?c?void 0:[]:x[c?"find":"filter"](a,function(a){for(var c in b)if(b[c]!==a[c])return!1;return!0})},x.findWhere=function(a,b){return x.where(a,b,!0)},x.max=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.max.apply(Math,a);if(!b&&x.isEmpty(a))return-1/0;var d={computed:-1/0,value:-1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g>d.computed&&(d={value:a,computed:g})}),d.value},x.min=function(a,b,c){if(!b&&x.isArray(a)&&a[0]===+a[0]&&a.length<65535)return Math.min.apply(Math,a);if(!b&&x.isEmpty(a))return 1/0;var d={computed:1/0,value:1/0};return y(a,function(a,e,f){var g=b?b.call(c,a,e,f):a;g<d.computed&&(d={value:a,computed:g})}),d.value},x.shuffle=function(a){var b,c=0,d=[];return y(a,function(a){b=x.random(c++),d[c-1]=d[b],d[b]=a}),d};var B=function(a){return x.isFunction(a)?a:function(b){return b[a]}};x.sortBy=function(a,b,c){var d=B(b);return x.pluck(x.map(a,function(a,b,e){return{value:a,index:b,criteria:d.call(c,a,b,e)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(c>d||void 0===c)return 1;if(d>c||void 0===d)return-1}return a.index<b.index?-1:1}),"value")};var C=function(a,b,c,d){var e={},f=B(null==b?x.identity:b);return y(a,function(b,g){var h=f.call(c,b,g,a);d(e,h,b)}),e};x.groupBy=function(a,b,c){return C(a,b,c,function(a,b,c){(x.has(a,b)?a[b]:a[b]=[]).push(c)})},x.countBy=function(a,b,c){return C(a,b,c,function(a,b){x.has(a,b)||(a[b]=0),a[b]++})},x.sortedIndex=function(a,b,c,d){c=null==c?x.identity:B(c);for(var e=c.call(d,b),f=0,g=a.length;g>f;){var h=f+g>>>1;c.call(d,a[h])<e?f=h+1:g=h}return f},x.toArray=function(a){return a?x.isArray(a)?h.call(a):a.length===+a.length?x.map(a,x.identity):x.values(a):[]},x.size=function(a){return null==a?0:a.length===+a.length?a.length:x.keys(a).length},x.first=x.head=x.take=function(a,b,c){return null==a?void 0:null==b||c?a[0]:h.call(a,0,b)},x.initial=function(a,b,c){return h.call(a,0,a.length-(null==b||c?1:b))},x.last=function(a,b,c){return null==a?void 0:null==b||c?a[a.length-1]:h.call(a,Math.max(a.length-b,0))},x.rest=x.tail=x.drop=function(a,b,c){return h.call(a,null==b||c?1:b)},x.compact=function(a){return x.filter(a,x.identity)};var D=function(a,b,c){return b&&x.every(a,x.isArray)?i.apply(c,a):(y(a,function(a){x.isArray(a)||x.isArguments(a)?b?g.apply(c,a):D(a,b,c):c.push(a)}),c)};x.flatten=function(a,b){return D(a,b,[])},x.without=function(a){return x.difference(a,h.call(arguments,1))},x.uniq=x.unique=function(a,b,c,d){x.isFunction(b)&&(d=c,c=b,b=!1);var e=c?x.map(a,c,d):a,f=[],g=[];return y(e,function(c,d){(b?d&&g[g.length-1]===c:x.contains(g,c))||(g.push(c),f.push(a[d]))}),f},x.union=function(){return x.uniq(x.flatten(arguments,!0))},x.intersection=function(a){var b=h.call(arguments,1);return x.filter(x.uniq(a),function(a){return x.every(b,function(b){return x.indexOf(b,a)>=0})})},x.difference=function(a){var b=i.apply(d,h.call(arguments,1));return x.filter(a,function(a){return!x.contains(b,a)})},x.zip=function(){for(var a=x.max(x.pluck(arguments,"length").concat(0)),b=new Array(a),c=0;a>c;c++)b[c]=x.pluck(arguments,""+c);return b},x.object=function(a,b){if(null==a)return{};for(var c={},d=0,e=a.length;e>d;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c},x.indexOf=function(a,b,c){if(null==a)return-1;var d=0,e=a.length;if(c){if("number"!=typeof c)return d=x.sortedIndex(a,b),a[d]===b?d:-1;d=0>c?Math.max(0,e+c):c}if(s&&a.indexOf===s)return a.indexOf(b,c);for(;e>d;d++)if(a[d]===b)return d;return-1},x.lastIndexOf=function(a,b,c){if(null==a)return-1;var d=null!=c;if(t&&a.lastIndexOf===t)return d?a.lastIndexOf(b,c):a.lastIndexOf(b);for(var e=d?c:a.length;e--;)if(a[e]===b)return e;return-1},x.range=function(a,b,c){arguments.length<=1&&(b=a||0,a=0),c=arguments[2]||1;for(var d=Math.max(Math.ceil((b-a)/c),0),e=0,f=new Array(d);d>e;)f[e++]=a,a+=c;return f};var E=function(){};x.bind=function(a,b){var c,d;if(w&&a.bind===w)return w.apply(a,h.call(arguments,1));if(!x.isFunction(a))throw new TypeError;return c=h.call(arguments,2),d=function(){if(!(this instanceof d))return a.apply(b,c.concat(h.call(arguments)));E.prototype=a.prototype;var e=new E;E.prototype=null;var f=a.apply(e,c.concat(h.call(arguments)));return Object(f)===f?f:e}},x.partial=function(a){var b=h.call(arguments,1);return function(){return a.apply(this,b.concat(h.call(arguments)))}},x.bindAll=function(a){var b=h.call(arguments,1);if(0===b.length)throw new Error("bindAll must be passed function names");return y(b,function(b){a[b]=x.bind(a[b],a)}),a},x.memoize=function(a,b){var c={};return b||(b=x.identity),function(){var d=b.apply(this,arguments);return x.has(c,d)?c[d]:c[d]=a.apply(this,arguments)}},x.delay=function(a,b){var c=h.call(arguments,2);return setTimeout(function(){return a.apply(null,c)},b)},x.defer=function(a){return x.delay.apply(x,[a,1].concat(h.call(arguments,1)))},x.throttle=function(a,b,c){var d,e,f,g=null,h=0;c||(c={});var i=function(){h=c.leading===!1?0:new Date,g=null,f=a.apply(d,e)};return function(){var j=new Date;h||c.leading!==!1||(h=j);var k=b-(j-h);return d=this,e=arguments,0>=k?(clearTimeout(g),g=null,h=j,f=a.apply(d,e)):g||c.trailing===!1||(g=setTimeout(i,k)),f}},x.debounce=function(a,b,c){var d,e=null;return function(){var f=this,g=arguments,h=function(){e=null,c||(d=a.apply(f,g))},i=c&&!e;return clearTimeout(e),e=setTimeout(h,b),i&&(d=a.apply(f,g)),d}},x.once=function(a){var b,c=!1;return function(){return c?b:(c=!0,b=a.apply(this,arguments),a=null,b)}},x.wrap=function(a,b){return function(){var c=[a];return g.apply(c,arguments),b.apply(this,c)}},x.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--)b=[a[c].apply(this,b)];return b[0]}},x.after=function(a,b){return function(){return--a<1?b.apply(this,arguments):void 0}},x.keys=v||function(a){if(a!==Object(a))throw new TypeError("Invalid object");var b=[];for(var c in a)x.has(a,c)&&b.push(c);return b},x.values=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push(a[c]);return b},x.pairs=function(a){var b=[];for(var c in a)x.has(a,c)&&b.push([c,a[c]]);return b},x.invert=function(a){var b={};for(var c in a)x.has(a,c)&&(b[a[c]]=c);return b},x.functions=x.methods=function(a){var b=[];for(var c in a)x.isFunction(a[c])&&b.push(c);return b.sort()},x.extend=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},x.pick=function(a){var b={},c=i.apply(d,h.call(arguments,1));return y(c,function(c){c in a&&(b[c]=a[c])}),b},x.omit=function(a){var b={},c=i.apply(d,h.call(arguments,1));for(var e in a)x.contains(c,e)||(b[e]=a[e]);return b},x.defaults=function(a){return y(h.call(arguments,1),function(b){if(b)for(var c in b)void 0===a[c]&&(a[c]=b[c])}),a},x.clone=function(a){return x.isObject(a)?x.isArray(a)?a.slice():x.extend({},a):a},x.tap=function(a,b){return b(a),a};var F=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;a instanceof x&&(a=a._wrapped),b instanceof x&&(b=b._wrapped);var e=j.call(a);if(e!=j.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(x.isFunction(g)&&g instanceof g&&x.isFunction(h)&&h instanceof h))return!1;c.push(a),d.push(b);var i=0,k=!0;if("[object Array]"==e){if(i=a.length,k=i==b.length)for(;i--&&(k=F(a[i],b[i],c,d)););}else{for(var l in a)if(x.has(a,l)&&(i++,!(k=x.has(b,l)&&F(a[l],b[l],c,d))))break;if(k){for(l in b)if(x.has(b,l)&&!i--)break;k=!i}}return c.pop(),d.pop(),k};x.isEqual=function(a,b){return F(a,b,[],[])},x.isEmpty=function(a){if(null==a)return!0;if(x.isArray(a)||x.isString(a))return 0===a.length;for(var b in a)if(x.has(a,b))return!1;return!0},x.isElement=function(a){return!(!a||1!==a.nodeType)},x.isArray=u||function(a){return"[object Array]"==j.call(a)},x.isObject=function(a){return a===Object(a)},y(["Arguments","Function","String","Number","Date","RegExp"],function(a){x["is"+a]=function(b){return j.call(b)=="[object "+a+"]"}}),x.isArguments(arguments)||(x.isArguments=function(a){return!(!a||!x.has(a,"callee"))}),"function"!=typeof/./&&(x.isFunction=function(a){return"function"==typeof a}),x.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},x.isNaN=function(a){return x.isNumber(a)&&a!=+a},x.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==j.call(a)},x.isNull=function(a){return null===a},x.isUndefined=function(a){return void 0===a},x.has=function(a,b){return k.call(a,b)},x.noConflict=function(){return a._=b,this},x.identity=function(a){return a},x.times=function(a,b,c){for(var d=Array(Math.max(0,a)),e=0;a>e;e++)d[e]=b.call(c,e);return d},x.random=function(a,b){return null==b&&(b=a,a=0),a+Math.floor(Math.random()*(b-a+1))};var G={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};G.unescape=x.invert(G.escape);var H={escape:new RegExp("["+x.keys(G.escape).join("")+"]","g"),unescape:new RegExp("("+x.keys(G.unescape).join("|")+")","g")};x.each(["escape","unescape"],function(a){x[a]=function(b){return null==b?"":(""+b).replace(H[a],function(b){return G[a][b]})}}),x.result=function(a,b){if(null==a)return void 0;var c=a[b];return x.isFunction(c)?c.call(a):c},x.mixin=function(a){y(x.functions(a),function(b){var c=x[b]=a[b];x.prototype[b]=function(){var a=[this._wrapped];return g.apply(a,arguments),M.call(this,c.apply(x,a))}})};var I=0;x.uniqueId=function(a){var b=++I+"";return a?a+b:b},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var J=/(.)^/,K={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},L=/\\|'|\r|\n|\t|\u2028|\u2029/g;x.template=function(a,b,c){var d;c=x.defaults({},c,x.templateSettings);var e=new RegExp([(c.escape||J).source,(c.interpolate||J).source,(c.evaluate||J).source].join("|")+"|$","g"),f=0,g="__p+='";a.replace(e,function(b,c,d,e,h){return g+=a.slice(f,h).replace(L,function(a){return"\\"+K[a]}),c&&(g+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'"),d&&(g+="'+\n((__t=("+d+"))==null?'':__t)+\n'"),e&&(g+="';\n"+e+"\n__p+='"),f=h+b.length,b}),g+="';\n",c.variable||(g="with(obj||{}){\n"+g+"}\n"),g="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+g+"return __p;\n";try{d=new Function(c.variable||"obj","_",g)}catch(h){throw h.source=g,h}if(b)return d(b,x);var i=function(a){return d.call(this,a,x)};return i.source="function("+(c.variable||"obj")+"){\n"+g+"}",i},x.chain=function(a){return x(a).chain()};var M=function(a){return this._chain?x(a).chain():a};x.mixin(x),y(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=d[a];x.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!=a&&"splice"!=a||0!==c.length||delete c[0],M.call(this,c)}}),y(["concat","join","slice"],function(a){var b=d[a];x.prototype[a]=function(){return M.call(this,b.apply(this._wrapped,arguments))}}),x.extend(x.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var Backbone=Backbone||{};!function(){var a=[],b=a.slice,c=function(a,b,c){var d,e=-1,f=b.length;switch(c.length){case 0:for(;++e<f;)(d=b[e]).callback.call(d.ctx);return;case 1:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0]);return;case 2:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0],c[1]);return;case 3:for(;++e<f;)(d=b[e]).callback.call(d.ctx,c[0],c[1],c[2]);return;default:for(;++e<f;)(d=b[e]).callback.apply(d.ctx,c)}},d=Backbone.Events={on:function(a,b,c){this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,b,c){var d=this,e=_.once(function(){d.off(a,e),b.apply(this,arguments)});return e._callback=b,this.on(a,e,c),this},off:function(a,b,c){var d,e,f,g,h,i,j,k;if(!this._events)return this;if(!a&&!b&&!c)return this._events={},this;for(g=a?[a]:_.keys(this._events),h=0,i=g.length;i>h;h++)if(a=g[h],d=this._events[a]){if(f=[],b||c)for(j=0,k=d.length;k>j;j++)e=d[j],(b&&b!==(e.callback._callback||e.callback)||c&&c!==e.context)&&f.push(e);this._events[a]=f}return this},trigger:function(a){if(!this._events)return this;var d=b.call(arguments,1),e=this._events[a],f=this._events.all;return e&&c(this,e,d),f&&c(this,f,arguments),this},listenTo:function(a,b,c){var d=this._listeners||(this._listeners={}),e=a._listenerId||(a._listenerId=_.uniqueId("l"));return d[e]=a,a.on(b,c||this,this),this},stopListening:function(a,b,c){var d=this._listeners;if(d){if(a)a.off(b,c,this),b||c||delete d[a._listenerId];else{for(var e in d)d[e].off(null,null,this);this._listeners={}}return this}}};d.bind=d.on,d.unbind=d.off,"undefined"!=typeof exports&&("undefined"!=typeof module&&module.exports&&(exports=module.exports=d),exports.Backbone=exports.Backbone||Backbone)}(),function(){function a(a){var d=(new Date).getTime(),e=Math.max(0,16-(d-c)),f=b.setTimeout(function(){a(d+e)},e);return c=d+e,f}var b=this,c=0,d=["ms","moz","webkit","o"];if("undefined"!=typeof exports)return"undefined"!=typeof module&&module.exports&&(exports=module.exports=a),void(exports.requestAnimationFrame=a);for(var e=0;e<d.length&&!b.requestAnimationFrame;++e)b.requestAnimationFrame=b[d[e]+"RequestAnimationFrame"],b.cancelAnimationFrame=b[d[e]+"CancelAnimationFrame"]||b[d[e]+"CancelRequestAnimationFrame"];b.requestAnimationFrame||(b.requestAnimationFrame=a),b.cancelAnimationFrame||(b.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(){function a(){var a=document.body.getBoundingClientRect(),b=this.width=a.width,c=this.height=a.height;this.renderer.setSize(b,c,this.ratio),this.trigger(q.Events.resize,b,c)}function b(){return(c.performance&&c.performance.now?c.performance:Date).now()}var c=this,d=c.Two||{},e=Math.sin,f=Math.cos,g=Math.atan2,h=Math.sqrt,i=(Math.round,Math.abs,Math.PI),j=2*i,k=i/2,l=Math.pow,m=Math.min,n=Math.max,o=0,p={hasEventListeners:_.isFunction(c.addEventListener),bind:function(a,b,c,d){return this.hasEventListeners?a.addEventListener(b,c,!!d):a.attachEvent("on"+b,c),this},unbind:function(a,b,c,d){return this.hasEventListeners?a.removeEventListeners(b,c,!!d):a.detachEvent("on"+b,c),this}},q=c.Two=function(b){var d=_.defaults(b||{},{fullscreen:!1,width:640,height:480,type:q.Types.svg,autostart:!1});if(_.each(d,function(a,b){"fullscreen"!==b&&"width"!==b&&"height"!==b&&"autostart"!==b&&(this[b]=a)},this),_.isElement(d.domElement)&&(this.type=q.Types[d.domElement.tagName.toLowerCase()]),this.renderer=new q[this.type](this),q.Utils.setPlaying.call(this,d.autostart),this.frameCount=0,d.fullscreen){var e=_.bind(a,this);_.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),_.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),p.bind(c,"resize",e),e()}else _.isElement(d.domElement)||(this.renderer.setSize(d.width,d.height,this.ratio),this.width=d.width,this.height=d.height);this.scene=this.renderer.scene,q.Instances.push(this)};_.extend(q,{Array:c.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.4.0",Identifier:"two-",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){return c.Two=d,this},uniqueId:function(){var a=o;return o++,a},Utils:{release:function(a){_.isObject(a)&&(_.isFunction(a.unbind)&&a.unbind(),a.vertices&&(_.isFunction(a.vertices.unbind)&&a.vertices.unbind(),_.each(a.vertices,function(a){_.isFunction(a.unbind)&&a.unbind()})),a.children&&_.each(a.children,function(a){q.Utils.release(a)}))},Curve:{CollinearityEpsilon:l(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:c.devicePixelRatio||1,getBackingStoreRatio:function(a){return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},getRatio:function(a){return q.Utils.devicePixelRatio/w(a)},setPlaying:function(a){return this.playing=!!a,this},getComputedMatrix:function(a,b){for(var c=[],b=b&&b.identity()||new q.Matrix,d=a;d&&d._matrix;)c.push(d._matrix),d=d.parent;return c.reverse(),_.each(c,function(a){var c=a.elements;b.multiply(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],c[8],c[9])}),b},applySvgAttributes:function(a,b){var c={},d={};if(getComputedStyle){var e=getComputedStyle(a);_.each(e,function(a){d[a]=e[a]})}return _.each(a.attributes,function(a){c[a.nodeName]=a.nodeValue}),void 0!=d.opacity&&(d["stroke-opacity"]=d.opacity,d["fill-opacity"]=d.opacity),_.extend(d,c),d.visible="none"!=d.display&&"visible"==d.visibility,_.each(d,function(a,c){switch(c){case"transform":break;case"visible":b.visible=a;break;case"stroke-linecap":b.cap=a;break;case"stroke-linejoin":b.join=a;break;case"stroke-miterlimit":b.miter=a;break;case"stroke-width":b.linewidth=parseFloat(a);break;case"stroke-opacity":case"fill-opacity":case"opacity":b.opacity=parseFloat(a);break;case"fill":case"stroke":b[c]="none"==a?"transparent":a;break;case"id":b.id=a;break;case"class":b.classList||(b.classList=[]),a.split(" ").forEach(function(a){b.classList.push(a)})}}),b},read:{svg:function(){return q.Utils.read.g.apply(this,arguments)},g:function(a){var b=new q.Group;return this.add(b),_.each(a.childNodes,function(a){var c=a.nodeName;if(c){var d=c.replace(/svg\:/gi,"").toLowerCase();if(d in q.Utils.read){var e=q.Utils.read[d].call(this,a);b.add(e)}}},this),q.Utils.applySvgAttributes(a,b)},polygon:function(a,b){var c=a.getAttribute("points"),d=[];c.replace(/(-?[\d\.?]+),(-?[\d\.?]+)/g,function(a,b,c){d.push(new q.Anchor(parseFloat(b),parseFloat(c)))});var e=new q.Polygon(d,!b).noStroke();return e.fill="black",q.Utils.applySvgAttributes(a,e)},polyline:function(a){return q.Utils.read.polygon(a,!0)},path:function(a){var b,c,d,e=a.getAttribute("d"),f=!1,g=!1,h=e.match(/[a-df-z][^a-df-z]*/gi),i=h.length-1,j=_.flatten(_.map(h,function(a,e){var h,j,k,m=a[0],n=m.toLowerCase();d=a.slice(1).trim(),d=d.replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(a,b,c){return parseFloat(b)*l(10,c)}),d=d.split(/[\s,]+|(?=\s?[+\-])/),f=m===n;var o,p,r,s,t,u,v,w,x;switch(n){case"z":e>=i?g=!0:(j=b.x,k=b.y,h=new q.Anchor(j,k,void 0,void 0,void 0,void 0,q.Commands.close));break;case"m":case"l":j=parseFloat(d[0]),k=parseFloat(d[1]),h=new q.Anchor(j,k,void 0,void 0,void 0,void 0,"m"===n?q.Commands.move:q.Commands.line),f&&h.addSelf(b),b=h;break;case"h":case"v":var y="h"===n?"x":"y",z="x"===y?"y":"x";h=new q.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,q.Commands.line),h[y]=parseFloat(d[0]),h[z]=b[z],f&&(h[y]+=b[y]),b=h;break;case"s":case"c":o=b.x,p=b.y,c||(c=(new q.Vector).copy(b)),"c"===n?(r=parseFloat(d[0]),s=parseFloat(d[1]),t=parseFloat(d[2]),u=parseFloat(d[3]),v=parseFloat(d[4]),w=parseFloat(d[5])):(x=q.Utils.getReflection(b,c,f),r=x.x,s=x.y,t=parseFloat(d[0]),u=parseFloat(d[1]),v=parseFloat(d[2]),w=parseFloat(d[3])),f&&(r+=o,s+=p,t+=o,u+=p,v+=o,w+=p),_.isObject(b.controls)||q.Anchor.AppendCurveProperties(b),b.controls.right.set(r-b.x,s-b.y),h=new q.Anchor(v,w,t-v,u-w,void 0,void 0,q.Commands.curve),b=h,c=h.controls.left;break;case"t":case"q":o=b.x,p=b.y,c||(c=(new q.Vector).copy(b)),c.isZero()?(r=o,s=p):(r=c.x,p=c.y),"q"===n?(t=parseFloat(d[0]),u=parseFloat(d[1]),v=parseFloat(d[1]),w=parseFloat(d[2])):(x=q.Utils.getReflection(b,c,f),t=x.x,u=x.y,v=parseFloat(d[0]),w=parseFloat(d[1])),f&&(r+=o,s+=p,t+=o,u+=p,v+=o,w+=p),_.isObject(b.controls)||q.Anchor.AppendCurveProperties(b),b.controls.right.set(r-b.x,s-b.y),h=new q.Anchor(v,w,t-v,u-w,void 0,void 0,q.Commands.curve),b=h,c=h.controls.left;break;case"a":throw new q.Utils.Error("not yet able to interpret Elliptical Arcs.")}return h}));if(!(j.length<=1)){j=_.compact(j);var k=new q.Polygon(j,g,void 0,!0).noStroke();return k.fill="black",q.Utils.applySvgAttributes(a,k)}},circle:function(a){var b=parseFloat(a.getAttribute("cx")),c=parseFloat(a.getAttribute("cy")),d=parseFloat(a.getAttribute("r")),g=q.Resolution,h=_.map(_.range(g),function(a){var b=a/g,c=b*j,h=d*f(c),i=d*e(c);return new q.Anchor(h,i)},this),i=new q.Polygon(h,!0,!0).noStroke();return i.translation.set(b,c),i.fill="black",q.Utils.applySvgAttributes(a,i)},ellipse:function(a){var b=parseFloat(a.getAttribute("cx")),c=parseFloat(a.getAttribute("cy")),d=parseFloat(a.getAttribute("rx")),g=parseFloat(a.getAttribute("ry")),h=q.Resolution,i=_.map(_.range(h),function(a){var b=a/h,c=b*j,i=d*f(c),k=g*e(c);return new q.Anchor(i,k)},this),k=new q.Polygon(i,!0,!0).noStroke();return k.translation.set(b,c),k.fill="black",q.Utils.applySvgAttributes(a,k)},rect:function(a){var b=parseFloat(a.getAttribute("x")),c=parseFloat(a.getAttribute("y")),d=parseFloat(a.getAttribute("width")),e=parseFloat(a.getAttribute("height")),f=d/2,g=e/2,h=[new q.Anchor(f,g),new q.Anchor(-f,g),new q.Anchor(-f,-g),new q.Anchor(f,-g)],i=new q.Polygon(h,!0).noStroke();return i.translation.set(b+f,c+g),i.fill="black",q.Utils.applySvgAttributes(a,i)},line:function(a){var b=parseFloat(a.getAttribute("x1")),c=parseFloat(a.getAttribute("y1")),d=parseFloat(a.getAttribute("x2")),e=parseFloat(a.getAttribute("y2")),f=d-b,g=e-c,h=f/2,i=g/2,j=[new q.Anchor(-h,-i),new q.Anchor(h,i)],k=new q.Polygon(j).noFill();return k.translation.set(b+h,c+i),q.Utils.applySvgAttributes(a,k)}},subdivide:function(a,b,c,d,e,f,g,h,i){var i=i||q.Utils.Curve.RecursionLimit,j=i+1;return a===g&&b===h?[new q.Anchor(g,h)]:_.map(_.range(0,j),function(i){var k=i/j,l=x(k,a,c,e,g),m=x(k,b,d,f,h);return new q.Anchor(l,m)})},getPointOnCubicBezier:function(a,b,c,d,e){var f=1-a;return f*f*f*b+3*f*f*a*c+3*f*a*a*d+a*a*a*e},getCurveLength:function(a,b,c,d,e,f,g,i,j){if(a===c&&b===d&&e===g&&f===i){var k=g-a,l=i-b;return h(k*k+l*l)}var m=9*(c-e)+3*(g-a),n=6*(a+e)-12*c,o=3*(c-a),p=9*(d-f)+3*(i-b),r=6*(b+f)-12*d,s=3*(d-b),t=function(a){var b=(m*a+n)*a+o,c=(p*a+r)*a+s;return h(b*b+c*c)};return y(t,0,1,j||q.Utils.Curve.RecursionLimit)},integrate:function(a,b,c,d){for(var e=q.Utils.Curve.abscissas[d-2],f=q.Utils.Curve.weights[d-2],g=.5*(c-b),h=g+b,i=0,j=d+1>>1,k=1&d?f[i++]*a(h):0;j>i;){var l=g*e[i];k+=f[i++]*(a(h+l)+a(h-l))}return g*k},getCurveFromPoints:function(a,b){for(var c=a.length,d=c-1,e=0;c>e;e++){var f=a[e];_.isObject(f.controls)||q.Anchor.AppendCurveProperties(f);var g=b?v(e-1,c):n(e-1,0),h=b?v(e+1,c):m(e+1,d),i=a[g],j=f,k=a[h];u(i,j,k),j._command=0===e?q.Commands.move:q.Commands.curve,j.controls.left.x=_.isNumber(j.controls.left.x)?j.controls.left.x:j.x,j.controls.left.y=_.isNumber(j.controls.left.y)?j.controls.left.y:j.y,j.controls.right.x=_.isNumber(j.controls.right.x)?j.controls.right.x:j.x,j.controls.right.y=_.isNumber(j.controls.right.y)?j.controls.right.y:j.y}},getControlPoints:function(a,b,c){var d=t(a,b),g=t(c,b),h=r(a,b),j=r(c,b),l=(d+g)/2;return b.u=_.isObject(b.controls.left)?b.controls.left:new q.Vector(0,0),b.v=_.isObject(b.controls.right)?b.controls.right:new q.Vector(0,0),1e-4>h||1e-4>j?(b._relative||(b.controls.left.copy(b),b.controls.right.copy(b)),b):(h*=.33,j*=.33,d>g?l+=k:l-=k,b.controls.left.x=f(l)*h,b.controls.left.y=e(l)*h,l-=i,b.controls.right.x=f(l)*j,b.controls.right.y=e(l)*j,b._relative||(b.controls.left.x+=b.x,b.controls.left.y+=b.y,b.controls.right.x+=b.x,b.controls.right.y+=b.y),b)},getReflection:function(a,b,c){var d=b.distanceTo(q.Vector.zero),g=t(q.Vector.zero,b);return new q.Vector(d*f(g)+(c?0:a.x),d*e(g)+(c?0:a.y))},angleBetween:function(a,b){var c,d;return arguments.length>=4?(c=arguments[0]-arguments[2],d=arguments[1]-arguments[3],g(d,c)):(c=a.x-b.x,d=a.y-b.y,g(d,c))},distanceBetweenSquared:function(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d},distanceBetween:function(a,b){return h(s(a,b))},mod:function(a,b){for(;0>a;)a+=b;return a%b},Collection:function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(a){this.name="two.js",this.message=a}}}),q.Utils.Error.prototype=new Error,q.Utils.Error.prototype.constructor=q.Utils.Error,q.Utils.Collection.prototype=new Array,q.Utils.Collection.constructor=q.Utils.Collection,_.extend(q.Utils.Collection.prototype,Backbone.Events,{pop:function(){var a=Array.prototype.pop.apply(this,arguments);return this.trigger(q.Events.remove,[a]),a},shift:function(){var a=Array.prototype.shift.apply(this,arguments);return this.trigger(q.Events.remove,[a]),a},push:function(){var a=Array.prototype.push.apply(this,arguments);return this.trigger(q.Events.insert,arguments),a},unshift:function(){var a=Array.prototype.unshift.apply(this,arguments);return this.trigger(q.Events.insert,arguments),a},splice:function(){var a,b=Array.prototype.splice.apply(this,arguments);return this.trigger(q.Events.remove,b),arguments.length>2&&(a=this.slice(arguments[0],arguments.length-2),this.trigger(q.Events.insert,a)),b}});var r=q.Utils.distanceBetween,s=q.Utils.distanceBetweenSquared,t=q.Utils.angleBetween,u=q.Utils.getControlPoints,v=(q.Utils.getCurveFromPoints,q.Utils.solveSegmentIntersection,q.Utils.decoupleShapes,q.Utils.mod),w=q.Utils.getBackingStoreRatio,x=q.Utils.getPointOnCubicBezier,y=(q.Utils.getCurveLength,q.Utils.integrate);_.extend(q.prototype,Backbone.Events,{appendTo:function(a){return a.appendChild(this.renderer.domElement),this},play:function(){return q.Utils.setPlaying.call(this,!0),this.trigger(q.Events.play)},pause:function(){return this.playing=!1,this.trigger(q.Events.pause)},update:function(){var a=!!this._lastFrame,c=b();this.frameCount++,a&&(this.timeDelta=parseFloat((c-this._lastFrame).toFixed(3))),this._lastFrame=c;var d=this.width,e=this.height,f=this.renderer;return(d!==f.width||e!==f.height)&&f.setSize(d,e,this.ratio),this.trigger(q.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(q.Events.render,this.frameCount)},add:function(a){var b=a;return _.isArray(a)||(b=_.toArray(arguments)),this.scene.add(b),this},remove:function(a){var b=a;return _.isArray(a)||(b=_.toArray(arguments)),this.scene.remove(b),this},clear:function(){return this.scene.remove(_.toArray(this.scene.children)),this},makeLine:function(a,b,c,d){var e=c-a,f=d-b,g=e/2,h=f/2,i=[new q.Anchor(-g,-h),new q.Anchor(g,h)],j=new q.Polygon(i).noFill();return j.translation.set(a+g,b+h),this.scene.add(j),j},makeRectangle:function(a,b,c,d){var e=c/2,f=d/2,g=[new q.Anchor(-e,-f),new q.Anchor(e,-f),new q.Anchor(e,f),new q.Anchor(-e,f)],h=new q.Polygon(g,!0);
return h.translation.set(a,b),this.scene.add(h),h},makeCircle:function(a,b,c){return this.makeEllipse(a,b,c,c)},makeEllipse:function(a,b,c,d){var g=q.Resolution,h=_.map(_.range(g),function(a){var b=a/g,h=b*j,i=c*f(h),k=d*e(h);return new q.Anchor(i,k)},this),i=new q.Polygon(h,!0,!0);return i.translation.set(a,b),this.scene.add(i),i},makeCurve:function(a){var b=arguments.length,c=a;if(!_.isArray(a)){c=[];for(var d=0;b>d;d+=2){var e=arguments[d];if(!_.isNumber(e))break;var f=arguments[d+1];c.push(new q.Anchor(e,f))}}var g=arguments[b-1],h=new q.Polygon(c,!(_.isBoolean(g)?g:void 0),!0),i=h.getBoundingClientRect(),j=i.left+i.width/2,k=i.top+i.height/2;return _.each(h.vertices,function(a){a.x-=j,a.y-=k}),h.translation.set(j,k),this.scene.add(h),h},makePolygon:function(a){var b=arguments.length,c=a;if(!_.isArray(a)){c=[];for(var d=0;b>d;d+=2){var e=arguments[d];if(!_.isNumber(e))break;var f=arguments[d+1];c.push(new q.Anchor(e,f))}}var g=arguments[b-1],h=new q.Polygon(c,!(_.isBoolean(g)?g:void 0)),i=h.getBoundingClientRect();return h.center().translation.set(i.left+i.width/2,i.top+i.height/2),this.scene.add(h),h},makeGroup:function(a){var b=a;_.isArray(a)||(b=_.toArray(arguments));var c=new q.Group;return this.scene.add(c),c.add(b),c},interpret:function(a){var b=a.tagName.toLowerCase();if(!(b in q.Utils.read))return null;var c=q.Utils.read[b].call(this,a);return this.add(c),c}}),function(){requestAnimationFrame(arguments.callee),q.Instances.forEach(function(a){a.playing&&a.update()})}(),"function"==typeof define&&define.amd?define(function(){return q}):"undefined"!=typeof module&&module.exports&&(module.exports=q)}(),function(){var a,b,c,d,e=Two.Vector=function(a,b){this.x=a||0,this.y=b||0};_.extend(e,{zero:new Two.Vector}),_.extend(e.prototype,Backbone.Events,{set:function(a,b){return this.x=a,this.y=b,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new e(this.x,this.y)},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addSelf:function(a){return this.x+=a.x,this.y+=a.y,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},subSelf:function(a){return this.x-=a.x,this.y-=a.y,this},multiplySelf:function(a){return this.x*=a.x,this.y*=a.y,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this},divideScalar:function(a){return a?(this.x/=a,this.y/=a):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return c=this.x-a.x,d=this.y-a.y,c*c+d*d},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a){return this.distanceTo(a)<1e-4},lerp:function(c,d){return a=(c.x-this.x)*d+this.x,b=(c.y-this.y)*d+this.y,this.set(a,b)},isZero:function(){return this.length()<1e-4},toString:function(){return this.x+","+this.y},toObject:function(){return{x:this.x,y:this.y}}});var f={set:function(a,b){return this._x=a,this._y=b,this.trigger(Two.Events.change)},copy:function(a){return this._x=a.x,this._y=a.y,this.trigger(Two.Events.change)},clear:function(){return this._x=0,this._y=0,this.trigger(Two.Events.change)},clone:function(){return new e(this._x,this._y)},add:function(a,b){return this._x=a.x+b.x,this._y=a.y+b.y,this.trigger(Two.Events.change)},addSelf:function(a){return this._x+=a.x,this._y+=a.y,this.trigger(Two.Events.change)},sub:function(a,b){return this._x=a.x-b.x,this._y=a.y-b.y,this.trigger(Two.Events.change)},subSelf:function(a){return this._x-=a.x,this._y-=a.y,this.trigger(Two.Events.change)},multiplySelf:function(a){return this._x*=a.x,this._y*=a.y,this.trigger(Two.Events.change)},multiplyScalar:function(a){return this._x*=a,this._y*=a,this.trigger(Two.Events.change)},divideScalar:function(a){return a?(this._x/=a,this._y/=a,this.trigger(Two.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this._x*a.x+this._y*a.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return c=this._x-a.x,d=this._y-a.y,c*c+d*d},setLength:function(a){return this.normalize().multiplyScalar(a)},equals:function(a){return this.distanceTo(a)<1e-4},lerp:function(c,d){return a=(c.x-this._x)*d+this._x,b=(c.y-this._y)*d+this._y,this.set(a,b)},isZero:function(){return this.length()<1e-4},toString:function(){return this._x+","+this._y},toObject:function(){return{x:this._x,y:this._y}}},g={get:function(){return this._x},set:function(a){this._x=a,this.trigger(Two.Events.change,"x")}},h={get:function(){return this._y},set:function(a){this._y=a,this.trigger(Two.Events.change,"y")}};Two.Vector.prototype.bind=Two.Vector.prototype.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",g),Object.defineProperty(this,"y",h),_.extend(this,f),this._bound=!0),Backbone.Events.bind.apply(this,arguments),this}}(),function(){var a,b,c,d,e,f=Two.Commands,g=Two.Anchor=function(a,b,c,d,e,h,i){return Two.Vector.call(this,a,b),this._broadcast=_.bind(function(){this.trigger(Two.Events.change)},this),this._command=i||f.move,this._relative=!0,i?(g.AppendCurveProperties(this),_.isNumber(c)&&(this.controls.left.x=c),_.isNumber(d)&&(this.controls.left.y=d),_.isNumber(e)&&(this.controls.right.x=e),void(_.isNumber(h)&&(this.controls.right.y=h))):this};_.extend(g,{AppendCurveProperties:function(c){a=c._x||c.x,b=c._y||c.y,c.controls={left:new Two.Vector(0,0),right:new Two.Vector(0,0)}}});var h={listen:function(){return _.isObject(this.controls)||g.AppendCurveProperties(this),_.each(this.controls,function(a){a.bind(Two.Events.change,this._broadcast)},this),this},ignore:function(){return _.each(this.controls,function(a){a.unbind(Two.Events.change,this._broadcast)},this),this},clone:function(){return d=this.controls,e=new Two.Anchor(this.x,this.y,d&&d.left.x,d&&d.left.y,d&&d.right.x,d&&d.right.y,this.command),e.relative=this._relative,e},toObject:function(){return c={x:this.x,y:this.y},this._command&&(c.command=this._command),this._relative&&(c.relative=this._relative),this.controls&&(c.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),c}};Object.defineProperty(g.prototype,"command",{get:function(){return this._command},set:function(a){return this._command=a,this._command!==f.curve||_.isObject(this.controls)||g.AppendCurveProperties(this),this.trigger(Two.Events.change)}}),Object.defineProperty(g.prototype,"relative",{get:function(){return this._relative},set:function(a){return this._relative==a?this:(this._relative=!!a,this.trigger(Two.Events.change))}}),_.extend(g.prototype,Two.Vector.prototype,h),Two.Anchor.prototype.bind=Two.Anchor.prototype.on=function(){Two.Vector.prototype.bind.apply(this,arguments),_.extend(this,h)},Two.Anchor.prototype.unbind=Two.Anchor.prototype.off=function(){Two.Vector.prototype.unbind.apply(this,arguments),_.extend(this,h)}}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,c,K,L,M,N,O,P,Q,R,S,T,U,V,W,X=(_.range(6),Math.cos),Y=Math.sin,Z=Math.tan,$=[],ab=Two.Matrix=function(a){this.elements=new Two.Array(9);var b=a;_.isArray(b)||(b=_.toArray(arguments)),this.identity().set(b)};_.extend(ab,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(d,f,g){return f.length<=3?(a=f[0]||0,b=f[1]||0,c=f[2]||0,e=d,l=e[0]*a+e[1]*b+e[2]*c,m=e[3]*a+e[4]*b+e[5]*c,n=e[6]*a+e[7]*b+e[8]*c,{x:l,y:m,z:n}):(o=d[0],p=d[1],q=d[2],r=d[3],s=d[4],t=d[5],u=d[6],v=d[7],w=d[8],x=f[0],y=f[1],z=f[2],A=f[3],B=f[4],C=f[5],D=f[6],E=f[7],F=f[8],g=g||new Two.Array(9),g[0]=o*x+p*A+q*D,g[1]=o*y+p*B+q*E,g[2]=o*z+p*C+q*F,g[3]=r*x+s*A+t*D,g[4]=r*y+s*B+t*E,g[5]=r*z+s*C+t*F,g[6]=u*x+v*A+w*D,g[7]=u*y+v*B+w*E,g[8]=u*z+v*C+w*F,g)}}),_.extend(ab.prototype,Backbone.Events,{set:function(a){return k=a,I=arguments.length,_.isArray(k)||(k=_.toArray(arguments)),_.each(k,function(a,b){_.isNumber(a)&&(this.elements[b]=a)},this),this.trigger(Two.Events.change)},identity:function(){return this.set(ab.Identity),this},multiply:function(a,b,c,d,e){return k=arguments,I=k.length,1>=I?(_.each(this.elements,function(b,c){this.elements[c]=b*a},this),this.trigger(Two.Events.change)):3>=I?(a=a||0,b=b||0,c=c||0,e=this.elements,l=e[0]*a+e[1]*b+e[2]*c,m=e[3]*a+e[4]*b+e[5]*c,n=e[6]*a+e[7]*b+e[8]*c,{x:l,y:m,z:n}):(G=this.elements,H=k,o=G[0],p=G[1],q=G[2],r=G[3],s=G[4],t=G[5],u=G[6],v=G[7],w=G[8],x=H[0],y=H[1],z=H[2],A=H[3],B=H[4],C=H[5],D=H[6],E=H[7],F=H[8],this.elements[0]=o*x+p*A+q*D,this.elements[1]=o*y+p*B+q*E,this.elements[2]=o*z+p*C+q*F,this.elements[3]=r*x+s*A+t*D,this.elements[4]=r*y+s*B+t*E,this.elements[5]=r*z+s*C+t*F,this.elements[6]=u*x+v*A+w*D,this.elements[7]=u*y+v*B+w*E,this.elements[8]=u*z+v*C+w*F,this.trigger(Two.Events.change))},inverse:function(b){return a=this.elements,b=b||new Two.Matrix,K=a[0],L=a[1],M=a[2],N=a[3],O=a[4],P=a[5],Q=a[6],R=a[7],S=a[8],T=S*O-P*R,U=-S*N+P*Q,V=R*N-O*Q,(W=K*T+L*U+M*V)?(W=1/W,b.elements[0]=T*W,b.elements[1]=(-S*L+M*R)*W,b.elements[2]=(P*L-M*O)*W,b.elements[3]=U*W,b.elements[4]=(S*K-M*Q)*W,b.elements[5]=(-P*K+M*N)*W,b.elements[6]=V*W,b.elements[7]=(-R*K+L*Q)*W,b.elements[8]=(O*K-L*N)*W,b):null},scale:function(a,b){return I=arguments.length,1>=I&&(b=a),this.multiply(a,0,0,0,b,0,0,0,1)},rotate:function(a){return c=X(a),J=Y(a),this.multiply(c,-J,0,J,c,0,0,0,1)},translate:function(a,b){return this.multiply(1,0,a,0,1,b,0,0,1)},skewX:function(b){return a=Z(b),this.multiply(1,a,0,0,1,0,0,0,1)},skewY:function(b){return a=Z(b),this.multiply(1,0,0,a,1,0,0,0,1)},toString:function(a){return this.toArray(a,$),$.join(" ")},toArray:function(l,m){return k=this.elements,j=!!m,a=parseFloat(k[0].toFixed(3)),b=parseFloat(k[1].toFixed(3)),c=parseFloat(k[2].toFixed(3)),d=parseFloat(k[3].toFixed(3)),e=parseFloat(k[4].toFixed(3)),f=parseFloat(k[5].toFixed(3)),l?(g=parseFloat(k[6].toFixed(3)),h=parseFloat(k[7].toFixed(3)),i=parseFloat(k[8].toFixed(3)),j?(m[0]=a,m[1]=d,m[2]=g,m[3]=b,m[4]=e,m[5]=h,m[6]=c,m[7]=f,void(m[8]=i)):[a,d,g,b,e,h,c,f,i]):j?(m[0]=a,m[1]=d,m[2]=b,m[3]=e,m[4]=c,void(m[5]=f)):[a,d,b,e,c,f]},clone:function(){return a=this.elements[0],b=this.elements[1],c=this.elements[2],d=this.elements[3],e=this.elements[4],f=this.elements[5],g=this.elements[6],h=this.elements[7],i=this.elements[8],new Two.Matrix(a,b,c,d,e,f,g,h,i)}})}(),function(){var a,b,c,d=Two.Utils.mod,e={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",createElement:function(a,d){return c=a,b=document.createElementNS(this.ns,c),"svg"===c&&(d=_.defaults(d||{},{version:this.version})),_.isObject(d)&&e.setAttributes(b,d),b},setAttribute:function(a,b){this.setAttribute(b,a)},setAttributes:function(a,b){return _.each(b,e.setAttribute,a),this},removeAttribute:function(a,b){this.removeAttribute(b)},removeAttributes:function(a,b){return _.each(b,e.removeAttribute,a),this},toString:function(a,b){var c,e=a.length,f=e-1;return _.map(a,function(g,h){var i,j,k,l,m,n,o,p,q,r=b?d(h-1,e):Math.max(h-1,0),s=b?d(h+1,e):Math.min(h+1,f),t=a[r],u=a[s],v=g.x.toFixed(3),w=g.y.toFixed(3);switch(g._command){case Two.Commands.close:i=Two.Commands.close;break;case Two.Commands.curve:var n=t.controls&&t.controls.right||t,o=g.controls&&g.controls.left||g;t._relative?(j=(n.x+t.x).toFixed(3),k=(n.y+t.y).toFixed(3)):(j=n.x.toFixed(3),k=n.y.toFixed(3)),g._relative?(l=(o.x+g.x).toFixed(3),m=(o.y+g.y).toFixed(3)):(l=o.x.toFixed(3),m=o.y.toFixed(3)),i=(0===h?Two.Commands.move:Two.Commands.curve)+" "+j+" "+k+" "+l+" "+m+" "+v+" "+w;break;case Two.Commands.move:c=g,i=Two.Commands.move+" "+v+" "+w;break;default:i=g._command+" "+v+" "+w}return h>=f&&b&&(g._command===Two.Commands.curve&&(u=c,p=g.controls&&g.controls.right||g,q=u.controls&&u.controls.left||u,g._relative?(j=(p.x+g.x).toFixed(3),k=(p.y+g.y).toFixed(3)):(j=p.x.toFixed(3),k=p.y.toFixed(3)),u._relative?(l=(q.x+u.x).toFixed(3),m=(q.y+u.y).toFixed(3)):(l=q.x.toFixed(3),m=q.y.toFixed(3)),v=u.x.toFixed(3),w=u.y.toFixed(3),i+=" C "+j+" "+k+" "+l+" "+m+" "+v+" "+w),i+=" Z"),i}).join(" ")},group:{appendChild:function(a){b=this.domElement.querySelector("#"+a),b&&this.elem.appendChild(b)},removeChild:function(a){b=this.domElement.querySelector("#"+a),b&&this.elem.removeChild(b)},renderChild:function(a){e[a._renderer.type].render.call(a,this)},render:function(b){this._update(),this._renderer.elem||(this._renderer.elem=e.createElement("g",{id:this.id}),b.appendChild(this._renderer.elem)),a=this._matrix.manual||this._flagMatrix;var c={domElement:b,elem:this._renderer.elem};a&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var d in this.children)e.group.renderChild.call(b,this.children[d]);return this._flagAdditions&&_.each(this.additions,e.group.appendChild,c),this._flagSubtractions&&_.each(this.subtractions,e.group.removeChild,c),this.flagReset()}},polygon:{render:function(c){return this._update(),this._renderer.elem||(this._renderer.elem=e.createElement("path",{id:this.id}),c.appendChild(this._renderer.elem)),b=this._renderer.elem,a=this._matrix.manual||this._flagMatrix,a&&b.setAttribute("transform","matrix("+this._matrix.toString()+")"),this._flagVertices&&(vertices=e.toString(this._vertices,this._closed),b.setAttribute("d",vertices)),this._flagFill&&b.setAttribute("fill",this._fill),this._flagStroke&&b.setAttribute("stroke",this._stroke),this._flagLinewidth&&b.setAttribute("stroke-width",this._linewidth),this._flagOpacity&&(b.setAttribute("stroke-opacity",this._opacity),b.setAttribute("fill-opacity",this._opacity)),this._flagVisible&&b.setAttribute("visibility",this._visible?"visible":"hidden"),this._flagCap&&b.setAttribute("stroke-linecap",this._cap),this._flagJoin&&b.setAttribute("stroke-linejoin",this._join),this._flagMiter&&b.setAttribute("stroke-miterlimit",this.miter),this.flagReset()}}},f=Two[Two.Types.svg]=function(a){this.domElement=a.domElement||e.createElement("svg"),this.scene=new Two.Group,this.scene.parent=this};_.extend(f,{Utils:e}),_.extend(f.prototype,Backbone.Events,{setSize:function(a,b){return this.width=a,this.height=b,e.setAttributes(this.domElement,{width:a,height:b}),this},render:function(){return e.group.render.call(this.scene,this.domElement),this}})}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=Two.Utils.mod,D=Two.Utils.getRatio,E={group:{renderChild:function(a){E[a._renderer.type].render.call(a,this)},render:function(b){return this._update(),a=this._matrix.elements,b.save(),b.transform(a[0],a[3],a[1],a[4],a[2],a[5]),_.each(this.children,E.group.renderChild,b),b.restore(),this.flagReset()}},polygon:{render:function(D){return this._update(),a=this._matrix.elements,b=this.stroke,c=this.linewidth,d=this.fill,e=this.opacity,f=this.visible,g=this.cap,h=this.join,i=this.miter,j=this.closed,k=this._vertices,l=k.length,m=l-1,f?(D.save(),a&&D.transform(a[0],a[3],a[1],a[4],a[2],a[5]),d&&(D.fillStyle=d),b&&(D.strokeStyle=b),c&&(D.lineWidth=c),i&&(D.miterLimit=i),h&&(D.lineJoin=h),g&&(D.lineCap=g),_.isNumber(e)&&(D.globalAlpha=e),D.beginPath(),k.forEach(function(a,b){switch(A=a.x.toFixed(3),B=a.y.toFixed(3),a._command){case Two.Commands.close:D.closePath();break;case Two.Commands.curve:o=j?C(b-1,l):Math.max(b-1,0),n=j?C(b+1,l):Math.min(b+1,m),p=k[o],q=k[n],w=p.controls&&p.controls.right||p,x=a.controls&&a.controls.left||a,p._relative?(u=(w.x+p.x).toFixed(3),v=(w.y+p.y).toFixed(3)):(u=w.x.toFixed(3),v=w.y.toFixed(3)),a._relative?(s=(x.x+a.x).toFixed(3),t=(x.y+a.y).toFixed(3)):(s=x.x.toFixed(3),t=x.y.toFixed(3)),D.bezierCurveTo(u,v,s,t,A,B),b>=m&&j&&(q=r,y=a.controls&&a.controls.right||a,z=q.controls&&q.controls.left||q,a._relative?(u=(y.x+a.x).toFixed(3),v=(y.y+a.y).toFixed(3)):(u=y.x.toFixed(3),v=y.y.toFixed(3)),q._relative?(s=(z.x+q.x).toFixed(3),t=(z.y+q.y).toFixed(3)):(s=z.x.toFixed(3),t=z.y.toFixed(3)),A=q.x.toFixed(3),B=q.y.toFixed(3),D.bezierCurveTo(u,v,s,t,A,B));break;case Two.Commands.line:D.lineTo(A,B);break;case Two.Commands.move:r=a,D.moveTo(A,B)}}),j&&D.closePath(),D.fill(),D.stroke(),D.restore(),this.flagReset()):this}}},F=Two[Two.Types.canvas]=function(a){this.domElement=a.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=a.overdraw||!1,this.scene=new Two.Group,this.scene.parent=this};_.extend(F,{Utils:E}),_.extend(F.prototype,Backbone.Events,{setSize:function(a,b,c){return this.width=a,this.height=b,this.ratio=_.isUndefined(c)?D(this.ctx):c,this.domElement.width=a*this.ratio,this.domElement.height=b*this.ratio,_.extend(this.domElement.style,{width:a+"px",height:b+"px"}),this},render:function(){var a=1===this.ratio;return a||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),E.group.render.call(this.scene,this.ctx),a||this.ctx.restore(),this}})}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I=(Two[Two.Types.canvas],Two.Matrix.Multiply),J=Two.Utils.mod,K=[1,0,0,0,1,0,0,0,1],L=new Two.Array(9),M=Two.Utils.getRatio,N={canvas:document.createElement("canvas"),uv:new Two.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{renderChild:function(a){N[a._renderer.type].render.call(a,this.gl,this.program)},render:function(d,e){return this._update(),a=this.parent,b=a._matrix&&a._matrix.manual||a._flagMatrix,c=this._matrix.manual||this._flagMatrix,(b||c)&&(this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,L),I(L,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale,b&&(this._flagMatrix=!0)),_.each(this.children,N.group.renderChild,{gl:d,program:e}),this.flagReset()}},polygon:{render:function(e,f){return this._visible&&this._opacity?(a=this.parent,b=a._matrix.manual||a._flagMatrix,c=this._matrix.manual||this._flagMatrix,d=this._flagVertices||this._flagFill||this._flagStroke||this._flagLinewidth||this._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale,this._update(),(b||c)&&(this._renderer.matrix||(this._renderer.matrix=new Two.Array(9)),this._matrix.toArray(!0,L),I(L,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale),d&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new Two.Array(12)),N.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),N.getTriangles(this._renderer.rect,this._renderer.triangles),N.updateBuffer(e,this,f),N.updateTexture(e,this)),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),e.vertexAttribPointer(f.textureCoords,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(f.matrix,!1,this._renderer.matrix),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer),e.vertexAttribPointer(f.position,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),this.flagReset()):this}},getBoundingClientRect:function(a,b,c){var d,e,f=1/0,g=-1/0,h=1/0,i=-1/0;a.forEach(function(a){var b,c,d,e,j,k,l=a.x,m=a.y,n=a.controls;h=Math.min(m,h),f=Math.min(l,f),g=Math.max(l,g),i=Math.max(m,i),a.controls&&(j=n.left,k=n.right,j&&k&&(b=a._relative?j.x+l:j.x,c=a._relative?j.y+m:j.y,d=a._relative?k.x+l:k.x,e=a._relative?k.y+m:k.y,b&&c&&d&&e&&(h=Math.min(c,e,h),f=Math.min(b,d,f),g=Math.max(b,d,g),i=Math.max(c,e,i))))}),_.isNumber(b)&&(h-=b,f-=b,g+=b,i+=b),d=g-f,e=i-h,c.top=h,c.left=f,c.right=g,c.bottom=i,c.width=d,c.height=e,c.centroid||(c.centroid={}),c.centroid.x=-f,c.centroid.y=-h},getTriangles:function(a,b){var c=a.top,d=a.left,e=a.right,f=a.bottom;b[0]=d,b[1]=c,b[2]=e,b[3]=c,b[4]=d,b[5]=f,b[6]=d,b[7]=f,b[8]=e,b[9]=c,b[10]=e,b[11]=f},updateCanvas:function(a){h=a._vertices,i=this.canvas,j=this.ctx,k=a._renderer.scale,l=a._stroke,m=a._linewidth*k,n=a._fill,o=a._opacity,p=a._cap,q=a._join,r=a._miter,s=a._closed,t=h.length,u=t-1,i.width=Math.max(Math.ceil(a._renderer.rect.width*k),1),i.height=Math.max(Math.ceil(a._renderer.rect.height*k),1),v=a._renderer.rect.centroid,w=v.x*k,x=v.y*k,j.clearRect(0,0,i.width,i.height),n&&(j.fillStyle=n),l&&(j.strokeStyle=l),m&&(j.lineWidth=m),r&&(j.miterLimit=r),q&&(j.lineJoin=q),p&&(j.lineCap=p),_.isNumber(o)&&(j.globalAlpha=o),j.beginPath(),h.forEach(function(a,b){var c,d,i,l,m,n,o,p,q,r,v,y;switch(e=(a.x*k+w).toFixed(3),f=(a.y*k+x).toFixed(3),a._command){case Two.Commands.close:j.closePath();break;case Two.Commands.curve:d=s?J(b-1,t):Math.max(b-1,0),c=s?J(b+1,t):Math.min(b+1,u),i=h[d],l=h[c],q=i.controls&&i.controls.right||i,r=a.controls&&a.controls.left||a,i._relative?(o=((q.x+i.x)*k+w).toFixed(3),p=((q.y+i.y)*k+x).toFixed(3)):(o=(q.x*k+w).toFixed(3),p=(q.y*k+x).toFixed(3)),a._relative?(m=((r.x+a.x)*k+w).toFixed(3),n=((r.y+a.y)*k+x).toFixed(3)):(m=(r.x*k+w).toFixed(3),n=(r.y*k+x).toFixed(3)),j.bezierCurveTo(o,p,m,n,e,f),b>=u&&s&&(l=g,v=a.controls&&a.controls.right||a,y=l.controls&&l.controls.left||l,a._relative?(o=((v.x+a.x)*k+w).toFixed(3),p=((v.y+a.y)*k+x).toFixed(3)):(o=(v.x*k+w).toFixed(3),p=(v.y*k+x).toFixed(3)),l._relative?(m=((y.x+l.x)*k+w).toFixed(3),n=((y.y+l.y)*k+w).toFixed(3)):(m=(y.x*k+w).toFixed(3),n=(y.y*k+x).toFixed(3)),e=(l.x*k+w).toFixed(3),f=(l.y*k+x).toFixed(3),j.bezierCurveTo(o,p,m,n,e,f));break;case Two.Commands.line:j.lineTo(e,f);break;case Two.Commands.move:g=a,j.moveTo(e,f)}}),s&&j.closePath(),j.fill(),j.stroke()},updateTexture:function(a,b){this.updateCanvas(b),b._renderer.texture&&a.deleteTexture(b._renderer.texture),a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer),b._renderer.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,b._renderer.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),this.canvas.width<=0||this.canvas.height<=0||a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(a,b,c){_.isObject(b._renderer.buffer)&&a.deleteBuffer(b._renderer.buffer),b._renderer.buffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b._renderer.buffer),a.enableVertexAttribArray(c.position),a.bufferData(a.ARRAY_BUFFER,b._renderer.triangles,a.STATIC_DRAW),_.isObject(b._renderer.textureCoordsBuffer)&&a.deleteBuffer(b._renderer.textureCoordsBuffer),b._renderer.textureCoordsBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b._renderer.textureCoordsBuffer),a.enableVertexAttribArray(c.textureCoords),a.bufferData(a.ARRAY_BUFFER,this.uv,a.STATIC_DRAW)},program:{create:function(a,b){if(y=a.createProgram(),_.each(b,function(b){a.attachShader(y,b)}),a.linkProgram(y),z=a.getProgramParameter(y,a.LINK_STATUS),!z)throw C=a.getProgramInfoLog(y),a.deleteProgram(y),new Two.Utils.Error("unable to link program: "+C);return y}},shaders:{create:function(a,b,c){if(A=a.createShader(a[c]),a.shaderSource(A,b),a.compileShader(A),B=a.getShaderParameter(A,a.COMPILE_STATUS),!B)throw C=a.getShaderInfoLog(A),a.deleteShader(A),new Two.Utils.Error("unable to compile shader "+A+": "+C);return A},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["attribute vec2 a_position;","attribute vec2 a_textureCoords;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","","varying vec2 v_textureCoords;","","void main() {","   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_textureCoords;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  gl_FragColor = texture2D(u_image, v_textureCoords);","}"].join("\n")}};N.ctx=N.canvas.getContext("2d");var O=Two[Two.Types.webgl]=function(a){if(this.domElement=a.domElement||document.createElement("canvas"),this.scene=new Two.Group,this.scene.parent=this,this._renderer={matrix:new Two.Array(K),scale:1},this._flagMatrix=!0,H=_.defaults(a||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=H.overdraw,D=this.ctx=this.domElement.getContext("webgl",H)||this.domElement.getContext("experimental-webgl",H),!this.ctx)throw new Two.Utils.Error("unable to create a webgl context. Try using another renderer.");G=N.shaders.create(D,N.shaders.vertex,N.shaders.types.vertex),F=N.shaders.create(D,N.shaders.fragment,N.shaders.types.fragment),this.program=N.program.create(D,[G,F]),D.useProgram(this.program),this.program.position=D.getAttribLocation(this.program,"a_position"),this.program.matrix=D.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=D.getAttribLocation(this.program,"a_textureCoords"),D.disable(D.DEPTH_TEST),D.enable(D.BLEND),D.blendEquationSeparate(D.FUNC_ADD,D.FUNC_ADD),D.blendFuncSeparate(D.SRC_ALPHA,D.ONE_MINUS_SRC_ALPHA,D.ONE,D.ONE_MINUS_SRC_ALPHA)};_.extend(O.prototype,Backbone.Events,{setSize:function(a,b,c){return this.width=a,this.height=b,this.ratio=_.isUndefined(c)?M(this.ctx):c,this.domElement.width=a*this.ratio,this.domElement.height=b*this.ratio,_.extend(this.domElement.style,{width:a+"px",height:b+"px"}),a*=this.ratio,b*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,a,b),E=this.ctx.getUniformLocation(this.program,"u_resolution"),this.ctx.uniform2f(E,a,b),this},render:function(){var a=this.ctx;return this.overdraw||a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),N.group.render.call(this.scene,a,this.program),this._flagMatrix=!1,this}})}(),function(){var a,b=(Two.Vector.zero,Two.Shape=function(){this._renderer={},this.id=Two.Identifier+Two.uniqueId(),this.classList=[],this._matrix=new Two.Matrix,this.translation=new Two.Vector,this.translation.bind(Two.Events.change,_.bind(b.FlagMatrix,this)),this.rotation=0,this.scale=1});_.extend(b,Backbone.Events,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(a){Object.defineProperty(a,"rotation",{get:function(){return this._rotation},set:function(a){this._rotation=a,this._flagMatrix=!0}}),Object.defineProperty(a,"scale",{get:function(){return this._scale},set:function(a){this._scale=a,this._flagMatrix=!0,this._flagScale=!0}})}}),_.extend(b.prototype,{_flagMatrix:!0,_rotation:0,_scale:1,addTo:function(a){return a.add(this),this},clone:function(){return a=new b,a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,_.each(b.Properties,function(b){a[b]=this[b]},this),a._update()},_update:function(){return!this._matrix.manual&&this._flagMatrix&&this._matrix.identity().translate(this.translation.x,this.translation.y).scale(this.scale).rotate(this.rotation),this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=!1,this._flagScale=!1,this}}),b.MakeObservable(b.prototype)}(),function(){function a(a,b,c){return p=b.controls&&b.controls.right,o=a.controls&&a.controls.left,z=b.x,A=b.y,B=(p||b).x,C=(p||b).y,D=(o||a).x,E=(o||a).y,F=a.x,G=a.y,p&&b._relative&&(B+=b.x,C+=b.y),o&&a._relative&&(D+=a.x,E+=a.y),Two.Utils.getCurveLength(z,A,B,C,D,E,F,G,c)}function b(a,b,c){return p=b.controls&&b.controls.right,o=a.controls&&a.controls.left,z=b.x,A=b.y,B=(p||b).x,C=(p||b).y,D=(o||a).x,E=(o||a).y,F=a.x,G=a.y,p&&b._relative&&(B+=b.x,C+=b.y),o&&a._relative&&(D+=a.x,E+=a.y),Two.Utils.subdivide(z,A,B,C,D,E,F,G,c)}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=Math.min,L=Math.max,M=Math.round,N=Two.Utils.getComputedMatrix,O={};_.each(Two.Commands,function(a,b){O[b]=new RegExp(a)});var P=Two.Polygon=function(a,b,c,d){Two.Shape.call(this),this._renderer.type="polygon",this._closed=!!b,this._curved=!!c,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this._vertices=[],this.vertices=a,this.automatic=!d};_.extend(P,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0},MakeObservable:function(a){Two.Shape.MakeObservable(a),_.each(P.Properties.slice(0,8),function(b){var c="_"+b,d="_flag"+b.charAt(0).toUpperCase()+b.slice(1);Object.defineProperty(a,b,{get:function(){return this[c]},set:function(a){this[c]=a,this[d]=!0}})}),Object.defineProperty(a,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length},set:function(){}}),Object.defineProperty(a,"closed",{get:function(){return this._closed},set:function(a){this._closed=!!a,this._flagVertices=!0}}),Object.defineProperty(a,"curved",{get:function(){return this._curved},set:function(a){this._curved=!!a,this._flagVertices=!0}}),Object.defineProperty(P.prototype,"automatic",{get:function(){return this._automatic},set:function(a){a!==this._automatic&&(this._automatic=!!a,method=this._automatic?"ignore":"listen",_.each(this.vertices,function(a){a[method]()}))}}),Object.defineProperty(a,"beginning",{get:function(){return this._beginning},set:function(a){this._beginning=K(L(a,0),this._ending),this._flagVertices=!0}}),Object.defineProperty(a,"ending",{get:function(){return this._ending},set:function(a){this._ending=K(L(a,this._beginning),1),this._flagVertices=!0}}),Object.defineProperty(a,"vertices",{get:function(){return this._collection},set:function(a){var b=_.bind(P.FlagVertices,this),c=_.bind(function(a){_.each(a,function(a){a.bind(Two.Events.change,b)},this),b()},this),d=_.bind(function(a){_.each(a,function(a){a.unbind(Two.Events.change,b)},this),b()},this);this._collection&&this._collection.unbind(),this._collection=new Two.Utils.Collection(a.slice(0)),this._collection.bind(Two.Events.insert,c),this._collection.bind(Two.Events.remove,d),verticesChanged=!0,c(this._collection)}})}}),_.extend(P.prototype,Two.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){return a=a||this.parent,j=_.map(this.vertices,function(a){return a.clone()}),k=new P(j,this.closed,this.curved,!this.automatic),_.each(Two.Shape.Properties,function(a){k[a]=this[a]},this),k.translation.copy(this.translation),k.rotation=this.rotation,k.scale=this.scale,a.add(k),k},toObject:function(){var a={vertices:_.map(this.vertices,function(a){return a.toObject()})};return _.each(Two.Shape.Properties,function(b){a[b]=this[b]},this),a.translation=this.translation.toObject,a.rotation=this.rotation,a.scale=this.scale,a},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){return l=this.getBoundingClientRect(!0),l.centroid={x:l.left+l.width/2,y:l.top+l.height/2},_.each(this.vertices,function(a){a.addSelf(l.centroid)}),this},center:function(){return l=this.getBoundingClientRect(!0),l.centroid={x:l.left+l.width/2,y:l.top+l.height/2},_.each(this.vertices,function(a){a.subSelf(l.centroid)}),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(a){return this._update(),x=a?this._matrix:N(this),m=this.linewidth/2,n,o=1/0,p=-1/0,q=1/0,r=-1/0,_.each(this._vertices,function(a){s=a.x,t=a.y,a=x.multiply(s,t,1),q=K(a.y-m,q),o=K(a.x-m,o),p=L(a.x+m,p),r=L(a.y+m,r)}),{top:q,left:o,right:p,bottom:r,width:p-o,height:r-q}},getPointAt:function(a,b){for(I=this.length*Math.min(Math.max(a,0),1),J=this.vertices.length,f=J-1,u=null,v=null,i=0,c=this._lengths.length,H=0;c>i;i++){if(H+this._lengths[i]>I){u=this.vertices[this.closed?Two.Utils.mod(i,J):i],v=this.vertices[Math.min(Math.max(i-1,0),f)],I-=H,a=I/this._lengths[i];
break}H+=this._lengths[i]}return _.isNull(u)||_.isNull(v)?null:(p=v.controls&&v.controls.right,o=u.controls&&u.controls.left,z=v.x,A=v.y,B=(p||v).x,C=(p||v).y,D=(o||u).x,E=(o||u).y,F=u.x,G=u.y,p&&v._relative&&(B+=v.x,C+=v.y),o&&u._relative&&(D+=u.x,E+=u.y),s=Two.Utils.getPointOnCubicBezier(a,z,B,D,F),t=Two.Utils.getPointOnCubicBezier(a,A,C,E,G),_.isObject(b)?(b.x=s,b.y=t,b):new Two.Vector(s,t))},plot:function(){return this.curved?(Two.Utils.getCurveFromPoints(this._vertices,this.closed),this):(_.each(this._vertices,function(a,b){a._command=0===b?Two.Commands.move:Two.Commands.line},this),this)},subdivide:function(a){return this._update(),f=this.vertices.length-1,v=this.vertices[f],g=this._closed||this.vertices[f]._command===Two.Commands.close,y=this._curved,j=[],_.each(this.vertices,function(c,d){if(0>=d&&!g)return void(v=c);if(c.command===Two.Commands.move)return j.push(new Two.Anchor(v.x,v.y)),d>0&&(j[j.length-1].command=Two.Commands.line),void(v=w=c);var e=b(c,v,a);j=j.concat(e),_.each(e,function(a,b){a.command=0>=b&&v.command===Two.Commands.move?Two.Commands.move:Two.Commands.line}),d>=f&&(this._closed&&this._automatic?(v=c,c=w,e=b(c,v,a),j=j.concat(e),_.each(e,function(a,b){a.command=0>=b&&v.command===Two.Commands.move?Two.Commands.move:Two.Commands.line})):g&&j.push(new Two.Anchor(c.x,c.y)),j[j.length-1].command=g?Two.Commands.close:Two.Commands.line),v=c},this),this._automatic=!1,this._curved=!1,this.vertices=j,this},_updateLength:function(b){return this._update(),f=this.vertices.length-1,v=this.vertices[f],g=this._closed||this.vertices[f]._command===Two.Commands.close,y=this._curved,H=0,_.isUndefined(this._lengths)&&(this._lengths=[]),_.each(this.vertices,function(c,d){return 0>=d&&!g||c.command===Two.Commands.move?(v=w=c,void(this._lengths[d]=0)):(this._lengths[d]=a(c,v,b),H+=this._lengths[d],d>=f&&g&&(v=c,c=w,this._lengths[d+1]=a(c,v,b),H+=this._lengths[d+1]),void(v=c))},this),this._length=H,this},_update:function(){if(this._flagVertices){for(c=this.vertices.length,f=c-1,d=M(this._beginning*f),e=M(this._ending*f),this._vertices.length=0,i=d;e+1>i;i++)h=this.vertices[i],this._vertices.push(h);this._automatic&&this.plot()}return Two.Shape.prototype._update.call(this),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=!1,Two.Shape.prototype.flagReset.call(this),this}}),P.MakeObservable(P.prototype)}(),function(){var a,b,c,d,e,f,g,h,i,j,k,l=Math.min,m=Math.max,n=Two.Group=function(){Two.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children={}};_.extend(n,{MakeObservable:function(a){Two.Shape.MakeObservable(a),n.MakeGetterSetters(a,Two.Polygon.Properties)},MakeGetterSetters:function(a,b){_.isArray(b)||(b=[b]),_.each(b,function(b){n.MakeGetterSetter(a,b)})},MakeGetterSetter:function(a,b){var c="_"+b;Object.defineProperty(a,b,{get:function(){return this[c]},set:function(a){this[c]=a}})}}),_.extend(n.prototype,Two.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,clone:function(a){return a=a||this.parent,c=new n,a.add(c),b=_.map(this.children,function(a){return a.clone(c)}),c.translation.copy(this.translation),c.rotation=this.rotation,c.scale=this.scale,c},toObject:function(){var a={children:{},translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return _.each(this.children,function(b,c){a.children[c]=b.toObject()},this),a},corner:function(){return d=this.getBoundingClientRect(!0),e={x:d.left,y:d.top},_.each(this.children,function(a){a.translation.subSelf(e)}),this},center:function(){return d=this.getBoundingClientRect(!0),d.centroid={x:d.left+d.width/2,y:d.top+d.height/2},_.each(this.children,function(a){a.translation.subSelf(d.centroid)}),this},getById:function(a){var b,c=function(a,d){if(a.id==d)return b=a,a;for(var e in a.children){if(b)return b;c(a.children[e],d)}};return c(this,a)||null},getByClassName:function(a){var b=[],c=function(a,d){-1!=a.classList.indexOf(d)&&b.push(a);for(var e in a.children)c(a.children[e],d);return b};return c(this,a)},getByType:function(a){var b=[],c=function(a,d){for(var e in a.children)a.children[e]instanceof d?b.push(a.children[e]):a.children[e]instanceof Two.Group&&c(a.children[e],d);return b};return c(this,a)},add:function(c){return f=arguments.length,g=c,b=this.children,h=this.parent,i=this.additions,_.isArray(c)||(g=_.toArray(arguments)),_.each(g,function(c){c&&(j=c.id,a=c.parent,_.isUndefined(b[j])&&(a&&(delete a.children[j],k=_.indexOf(a.additions,j),k>=0&&a.additions.splice(k,1)),b[j]=c,c.parent=this,i.push(j),this._flagAdditions=!0))},this),this},remove:function(c){return f=arguments.length,g=c,b=this.children,h=this.parent,i=this.subtractions,0>=f&&h?(h.remove(this),this):(_.isArray(c)||(g=_.toArray(arguments)),_.each(g,function(c){j=c.id,grandchildren=c.children,a=c.parent,j in b&&(delete b[j],delete c.parent,k=_.indexOf(a.additions,j),k>=0&&a.additions.splice(k,1),i.push(j),this._flagSubtractions=!0)},this),this)},getBoundingClientRect:function(){this._update();var a=1/0,b=-1/0,c=1/0,e=-1/0;return _.each(this.children,function(f){d=f.getBoundingClientRect(),_.isNumber(d.top)&&_.isNumber(d.left)&&_.isNumber(d.right)&&_.isNumber(d.bottom)&&(c=l(d.top,c),a=l(d.left,a),b=m(d.right,b),e=m(d.bottom,e))},this),{top:c,left:a,right:b,bottom:e,width:b-a,height:e-c}},noFill:function(){return _.each(this.children,function(a){a.noFill()}),this},noStroke:function(){return _.each(this.children,function(a){a.noStroke()}),this},subdivide:function(){var a=arguments;return _.each(this.children,function(b){b.subdivide.apply(b,a)}),this},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),Two.Shape.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}();